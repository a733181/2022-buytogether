import{A as C,a1 as E,E as O,r as J,f as L,a as n,c as o,b as i,H as e,a2 as z,d as t,K as v,L as y,t as r,q as u,w as $,N as c,p as I,h as S,B as F}from"./index.a77cd1a0.js";import{_ as K}from"./eye-solid.00a8ea9c.js";import{u as M,_ as R}from"./TheModel.6f7fa3ed.js";import{u as V}from"./orders.7f54d28a.js";const U={class:"overflow-auto"},G={class:"mt-10 w-full table-auto"},Q=t("thead",null,[t("tr",null,[t("th",{class:"border-2 p-2"},"\u8A02\u55AE\u7DE8\u865F"),t("th",{class:"border-2 p-2"},"\u5546\u54C1\u540D\u7A31"),t("th",{class:"border-2 p-2"},"\u7E3D\u91CF"),t("th",{class:"border-2 p-2"},"\u7E3D\u91D1\u984D"),t("th",{class:"border-2 p-2"},"\u662F\u5426\u4ED8\u6B3E"),t("th",{class:"border-2 p-2"},"\u6536\u4EF6\u5730\u5740"),t("th",{class:"border-2 p-2"},"\u4ED8\u6B3E\u5E33\u6236"),t("th",{class:"border-2 p-2"},"\u51FA\u8CA8\u72C0\u614B"),t("th",{class:"border-2 p-2"},"\u5546\u54C1\u8A73\u60C5")])],-1),W={class:"border-2 p-2 text-center"},X={class:"border-2 p-2 text-center"},Y={class:"border-2 p-2 text-center"},Z={class:"border-2 p-2 text-center"},ss={class:"border-2 p-2 text-center"},ts={key:0},ds={key:1,class:"text-red-400"},rs={class:"border-2 p-2"},es={class:""},as={class:"border-2 p-2"},ls={class:"border-2 p-2 text-center"},ns={key:0,class:"text-red-400"},os={key:1},cs=t("p",null,null,-1),us={class:"border-2 p-2"},ps=["onClick"],is={class:"mb-4"},_s={class:"mb-4"},hs={key:0},bs={key:1,class:"ml-10 text-red-400"},fs=t("p",{class:"mb-"},"\u6536\u4EF6\u5730\u5740\uFF1A",-1),gs={class:"mt-4"},Is=["src"],ks={class:"mt-2"},vs={class:"mt-2"},ys=t("p",null,"\u6536\u6B3E\u5E33\u6236\uFF1A",-1),Ss={key:1},xs={__name:"adminOrder",setup(B){const b=V(),{orderAdmin:k,showProduct:l}=C(b),{paidOrderHandler:x,cancelOrderHandler:m,shipOrderHandler:q}=b,{toggleShow:P}=C(M()),{sortOrder:A}=E(),_=O(()=>A.slice(0,4)),h=J(_.value[0]),H=O(()=>{const a=JSON.parse(JSON.stringify(k.value));if(h.value===_.value[0])return a.filter(d=>(d.products=d.products.filter(s=>!s.paid.isPaid&&s.shippingStatus!==2),d.products.length>0));if(h.value===_.value[1])return a.filter(d=>(d.products=d.products.filter(s=>s.paid.isPaid&&s.shippingStatus===0),d.products.length>0));if(h.value===_.value[2])return a.filter(d=>(d.products=d.products.filter(s=>s.paid.isPaid&&s.shippingStatus===1),d.products.length>0));if(h.value===_.value[3])return a.filter(d=>(d.products=d.products.filter(s=>s.shippingStatus===2),d.products.length>0))}),T=a=>a.reduce((d,s)=>d+s.quantity,0),j=a=>a.map(s=>s.quantity*s.productId.price).reduce((s,p)=>s+p,0),f=a=>a.reduce((d,s)=>(s.paid.isPaid&&s.shippingStatus!==2&&d++,d),0),g=a=>a.reduce((d,s)=>(!s.paid.isPaid&&s.shippingStatus!==2&&d++,d),0),w=a=>a.reduce((d,s)=>(s.shippingStatus===0&&d++,d),0),N=a=>a.reduce((d,s)=>(s.shippingStatus===1&&d++,d),0),D=a=>{P.value=!0,l.value.list=a};return L(()=>P.value,a=>{a||(l.value.list={})}),(a,d)=>(n(),o("div",U,[i(z,{modelValue:h.value,"onUpdate:modelValue":d[0]||(d[0]=s=>h.value=s),select:e(_)},null,8,["modelValue","select"]),t("table",G,[Q,t("tbody",null,[(n(!0),o(v,null,y(e(H),s=>(n(),o("tr",{key:s._id},[t("td",W,r(s._id),1),t("td",X,[(n(!0),o(v,null,y(s.products,p=>(n(),o("p",null,r(p.productId.name),1))),256))]),t("td",Y,r(T(s.products)),1),t("td",Z,r(j(s.products)),1),t("td",ss,[f(s.products)?(n(),o("p",ts,r(f(s.products))+" \u7B46\u5DF2\u4ED8\u6B3E ",1)):u("",!0),g(s.products)?(n(),o("p",ds,r(g(s.products))+" \u7B46\u672A\u4ED8\u6B3E ",1)):u("",!0)]),t("td",rs,[t("p",null,r(s.addressId.name),1),t("p",es,r(s.addressId.code)+" "+r(s.addressId.city)+" "+r(s.addressId.districts)+" "+r(s.addressId.street),1),t("p",null,r(s.addressId.phone),1)]),t("td",as,[t("p",null,r(s.bankId.bankName),1),t("p",null,r(s.bankId.bankNumber),1)]),t("td",ls,[w(s.products)?(n(),o("p",ns,r(w(s.products))+" \u7B46\u672A\u51FA\u8CA8 ",1)):u("",!0),N(s.products)?(n(),o("p",os,r(N(s.products))+" \u7B46\u5DF2\u51FA\u8CA8 ",1)):u("",!0),cs]),t("td",us,[t("img",{src:K,class:"w-6 hover:opacity-60 mx-auto",onClick:p=>D(s)},null,8,ps)])]))),128))])]),i(R,null,{default:$(()=>[t("div",null,[t("p",is,[c(" \u8A02\u55AE\u7DE8\u865F\uFF1A "),t("span",null,r(e(l).list._id),1)]),t("p",_s,[c(" \u662F\u5426\u4ED8\u6B3E\uFF1A "),f(e(l).list.products)?(n(),o("span",hs,r(f(e(l).list.products))+"\u7B46\u5DF2\u4ED8\u6B3E",1)):u("",!0),g(e(l).list.products)?(n(),o("span",bs,r(g(e(l).list.products))+"\u7B46\u672A\u4ED8\u6B3E",1)):u("",!0)]),fs,t("p",null,[c(" \u59D3\u540D\uFF1A "),t("span",null,r(e(l).list.addressId.name),1)]),t("p",null,[c(" \u5730\u5740\uFF1A "),t("span",null,r(e(l).list.addressId.code)+" "+r(e(l).list.addressId.city)+" "+r(e(l).list.addressId.districts)+" "+r(e(l).list.addressId.street),1)]),t("p",null,[c(" \u96FB\u8A71\uFF1A "),t("span",null,r(e(l).list.addressId.phone),1)]),t("p",gs,[c(" \u4ED8\u6B3E\u5E33\u6236\uFF1A "),t("span",null,r(e(l).list.bankId.bankName)+" "+r(e(l).list.bankId.bankNumber),1)]),(n(!0),o(v,null,y(e(l).list.products,s=>(n(),o("div",{key:s._id,class:"flex flex-col lg:flex-row gap-6 mb-10 mt-8 lg: justify-around"},[t("img",{src:s.productId.image,class:"rounded-lg w-56 h-36 lg:w-80 lg:h-56 object-cover"},null,8,Is),t("div",ks,[t("p",null,[c(" \u5546\u54C1\u540D\u7A31\uFF1A "),t("span",null,r(s.productId.name),1)]),t("p",null,[c(" \u5546\u54C1\u6578\u91CF\uFF1A "),t("span",null,r(s.quantity),1)]),t("p",null,[c(" \u5546\u54C1\u50F9\u683C\uFF1A "),t("span",null,r(s.productId.price),1)])]),t("div",null,[t("div",vs,[ys,t("p",null,r(s.productId.bankId.bankName),1),t("p",null,r(s.productId.bankId.bankNumber),1)]),s.paid.isPaid?(n(),o("p",{key:0,class:I(["mt-2",{"text-red-400":s.shippingStatus===0}])},r(s.shippingStatus===0?"\u672A\u51FA\u8CA8":"\u5DF2\u51FA\u8CA8"),3)):u("",!0),s.shippingStatus===2?(n(),o("p",Ss,"\u5DF2\u53D6\u6D88")):u("",!0),i(S,{text:"\u4ED8\u6B3E",class:I(["w-full mt-6",{"disabled: opacity-50":s.paid.isPaid||s.shippingStatus===2}]),disabled:s.paid.isPaid||s.shippingStatus===2,onClick:p=>e(x)({orderId:e(l).list._id,productId:s.productId._id})},null,8,["disabled","class","onClick"]),i(S,{text:"\u53D6\u6D88\u8A02\u55AE",class:I(["w-full mt-6",{"disabled: opacity-50":s.paid.isPaid||s.shippingStatus===2}]),className:"btn-outline",disabled:s.paid.isPaid||s.shippingStatus===2,onClick:p=>e(m)({orderId:e(l).list._id,productId:s.productId._id})},null,8,["disabled","class","onClick"]),i(S,{text:"\u51FA\u8CA8",class:I(["w-full mt-6",{"disabled: opacity-50":!s.paid.isPaid||s.shippingStatus===1}]),disabled:!s.paid.isPaid||s.shippingStatus===1,onClick:p=>e(q)({orderId:e(l).list._id,productId:s.productId._id})},null,8,["disabled","class","onClick"])])]))),128))])]),_:1})]))}},Ps={class:"container py-10"},ws=t("span",{class:"text-primary font-bold"},"\u8A02\u55AE\u7BA1\u7406",-1),Vs={__name:"OrderAdminView",setup(B){const b=V(),{getAdminOrder:k}=b;return k(),(l,x)=>(n(),o("div",Ps,[i(F,{class:"mb-10"},{default:$(()=>[ws]),_:1}),i(xs)]))}};export{Vs as default};
