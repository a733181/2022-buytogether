import{a1 as j,u as q,A as N,a5 as D,r as _,e as B,E,f as y,G as F,a as c,c as G,H as u,M as V,w as d,B as A,d as l,i as W,b as i,a0 as n,q as S,h as H,N as b,t as $}from"./index.7a47915f.js";import{v as m}from"./index.18f3ce4a.js";const J={class:"container py-10"},K={class:"flex"},O=l("p",null,"\u2002/\u2002",-1),Q={class:"flex"},X=l("p",null,"\u2002/\u2002",-1),Y={class:"lg:w-1/2 mx-auto"},Z=["onSubmit"],ee={class:"grid gap-5 grid-cols-3"},te=l("p",null,"\u8ACB\u9EDE\u9078\u57CE\u5E02\uFF0C\u9078\u64C7\u57CE\u5E02",-1),re=l("p",null,"\u8ACB\u9EDE\u9078\u5340\u9109\u93AE\uFF0C\u9078\u64C7\u5340\u9109\u93AE",-1),se={class:"grid grid-cols-2 gap-5"},le={class:"flex items-center justify-center gap-5 mt-8"},ne={__name:"AddressInfoView",setup(oe){var U,w;const I=j(),{districtsList:x}=I,L=q(),{users:p}=N(L),g=D(),{sumbitAddressHandler:M,cancelAddressHandler:P}=g,{editAddress:o}=N(g),h=_(((U=o.value)==null?void 0:U.phone)===p.value.phone),k=_(((w=o.value)==null?void 0:w.name)===p.value.name),v=_(!1),e=B({_id:o.value._id||"",userId:o.value.userId||null,code:o.value.code||"",city:o.value.city||"",districts:o.value.districts||"",street:o.value.street||"",name:o.value.name||"",phone:o.value.phone||"",preset:o.value.preset}),r=B({city:{error:!1,value:""},districts:{error:!1,value:""},street:{error:!1,value:""},name:{error:!1,value:""},phone:{error:!1,value:""}}),T=E(()=>x.map(a=>a.name)),C=E(()=>e.city!==""?x.filter(a=>a.name===e.city)[0].districts.map(a=>a.name):[]);y(h,a=>{a?e.phone=p.value.phone:e.phone=""}),y(k,a=>{a?e.name=p.value.name||"":e.name=""}),y(()=>e.districts,()=>{if(e.districts==="")e.code="";else if(e.districts.length>2){const a=x.filter(t=>t.name===e.city)[0].districts.filter(t=>t.name===e.districts)[0].zip;e.code=a}}),y(()=>e.city,()=>{e.city===""&&(e.code="",e.districts="")});const R=()=>m.isEmpty(e.city)?(r.city.value="\u70BA\u5FC5\u586B",r.city.error=!0,!0):m.isEmpty(e.districts)?(r.districts.value="\u70BA\u5FC5\u586B",r.districts.error=!0,!0):m.isEmpty(e.street)?(r.street.value="\u70BA\u5FC5\u586B",r.street.error=!0,!0):m.isEmpty(e.phone)?(r.phone.value="\u70BA\u5FC5\u586B",r.phone.error=!0,!0):m.isEmpty(e.name)?(r.name.value="\u70BA\u5FC5\u586B",r.name.error=!0,!0):m.isMobilePhone(e.phone,["zh-TW"])?T.value.some(a=>a===e.city)?C.value.some(a=>a===e.districts)?!1:(r.districts.value="\u683C\u5F0F\u932F\u8AA4",r.districts.error=!0,!0):(r.city.value="\u683C\u5F0F\u932F\u8AA4",r.city.error=!0,!0):(r.phone.value="\u683C\u5F0F\u932F\u8AA4",r.phone.error=!0,!0),z=async()=>{R()||(v.value=!0,e.code=Number(e.code),await M(e),v.value=!1)};return(a,t)=>{const f=F("RouterLink");return c(),G("div",J,[u(o).type!=="admin"?(c(),V(A,{key:0,class:"mb-10"},{default:d(()=>[l("div",K,[i(f,{to:"/member/ship",class:"text-primary font-bold hover:scale-105"},{default:d(()=>[b("\u5E33\u6236")]),_:1}),O,i(f,{to:"/member/addresslist",class:"hover:scale-105"},{default:d(()=>[b("\u5730\u5740\u5217\u8868")]),_:1}),l("p",null,$(u(o)._id?"\u2002/\u2002\u4FEE\u6539\u5730\u5740":"\u2002/\u2002\u65B0\u589E\u5730\u5740"),1)])]),_:1})):(c(),V(A,{key:1,class:"mb-10"},{default:d(()=>[l("div",Q,[i(f,{to:"/member/shipadmin",class:"hover:scale-105"},{default:d(()=>[b("\u6703\u54E1")]),_:1}),X,i(f,{to:"/member/adminaddress",class:"hover:scale-105"},{default:d(()=>[b("\u5730\u5740\u5217\u8868")]),_:1}),l("p",null,$(u(o)._id?"\u2002/\u2002\u4FEE\u6539\u5730\u5740":"\u2002/\u2002\u65B0\u589E\u5730\u5740"),1)])]),_:1})),l("div",Y,[l("form",{onSubmit:W(z,["prevent"])},[l("div",ee,[i(n,{title:"\u90F5\u905E\u5340\u865F",disabled:!0,modelValue:e.code,"onUpdate:modelValue":t[0]||(t[0]=s=>e.code=s)},null,8,["modelValue"]),l("div",null,[i(n,{title:"\u57CE\u5E02",modelValue:e.city,"onUpdate:modelValue":t[1]||(t[1]=s=>e.city=s),error:r.city.error,errorText:r.city.value,onClick:t[2]||(t[2]=s=>r.city.error=!1),select:u(T)},null,8,["modelValue","error","errorText","select"]),te]),l("div",null,[i(n,{title:"\u5340\u9109\u93AE",modelValue:e.districts,"onUpdate:modelValue":t[3]||(t[3]=s=>e.districts=s),error:r.districts.error,errorText:r.districts.value,onClick:t[4]||(t[4]=s=>r.districts.error=!1),select:u(C)},null,8,["modelValue","error","errorText","select"]),re])]),i(n,{title:"\u8857\u9053",modelValue:e.street,"onUpdate:modelValue":t[5]||(t[5]=s=>e.street=s),error:r.street.error,errorText:r.street.value,onClick:t[6]||(t[6]=s=>r.street.error=!1)},null,8,["modelValue","error","errorText"]),l("div",se,[l("div",null,[i(n,{title:"\u59D3\u540D",modelValue:e.name,"onUpdate:modelValue":t[7]||(t[7]=s=>e.name=s),error:r.name.error,errorText:r.name.value,onClick:t[8]||(t[8]=s=>r.name.error=!1)},null,8,["modelValue","error","errorText"]),u(o).type==="user"?(c(),V(n,{key:0,title:"\u540C\u5E33\u865F\u59D3\u540D",type:"checkbox",modelValue:k.value,"onUpdate:modelValue":t[9]||(t[9]=s=>k.value=s)},null,8,["modelValue"])):S("",!0)]),l("div",null,[i(n,{title:"\u96FB\u8A71",modelValue:e.phone,"onUpdate:modelValue":t[10]||(t[10]=s=>e.phone=s),error:r.phone.error,errorText:r.phone.value,onClick:t[11]||(t[11]=s=>r.phone.error=!1)},null,8,["modelValue","error","errorText"]),u(o).type==="user"?(c(),V(n,{key:0,title:"\u540C\u5E33\u865F\u96FB\u8A71",type:"checkbox",modelValue:h.value,"onUpdate:modelValue":t[12]||(t[12]=s=>h.value=s)},null,8,["modelValue"])):S("",!0)])]),i(n,{title:"\u9810\u8A2D",type:"checkbox",modelValue:e.preset,"onUpdate:modelValue":t[13]||(t[13]=s=>e.preset=s),id:"addressPreset"},null,8,["modelValue"]),l("div",le,[i(H,{text:"\u53D6\u6D88",className:"btn-outline",class:"w-1/4",onClick:u(P)},null,8,["onClick"]),i(H,{type:"sumbit",text:"\u78BA\u5B9A",class:"w-1/4",disabled:v.value,loading:v.value},null,8,["disabled","loading"])])],40,Z)])])}}};export{ne as default};
