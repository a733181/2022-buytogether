import{r as I,a5 as A,y as c,a2 as C,a3 as H,A as u,o as i,c as p,a as _,w as O,B as S,b as s,H as V,I as j,E as o,t as l,K as v,f as k,n as q}from"./index.47490af8.js";import{u as L}from"./orders.ec46ec78.js";const T={class:"container pt-44 lg:pt-32 pb-10"},E=s("span",{class:"text-primary font-bold"},"\u8CFC\u7269\u8ECA",-1),P=s("span",null,"\u2002/\u2002",-1),R=s("span",null,"\u4ED8\u6B3E",-1),z={class:"w-full"},D=s("thead",null,[s("tr",null,[s("th",{class:"border-2 p-2"},"\u5716\u7247"),s("th",{class:"border-2 p-2"},"\u540D\u7A31"),s("th",{class:"border-2 p-2"},"\u6578\u91CF"),s("th",{class:"border-2 p-2"},"\u55AE\u50F9"),s("th",{class:"border-2 p-2"},"\u5C0F\u8A08"),s("th",{class:"border-2 p-2"},"\u6536\u6B3E\u5E33\u6236"),s("th",{class:"border-2 p-2"},"\u4ED8\u6B3E")])],-1),F={class:"border-2 p-2"},K=["src","alt"],G={class:"border-2 p-2 text-center"},J={class:"border-2 p-2"},M={class:"flex justify-center items-center gap-3 lg:gap-6"},Q={class:"border-2 p-2 text-center"},U={class:"border-2 p-2 text-center"},W={class:"border-2 p-2 text-center"},X={class:"border-2 p-2"},Y=s("td",{colspan:"3"},null,-1),Z=s("td",{class:"text-center p-4"},[s("p",null,"\u7E3D\u8A08")],-1),ss={class:"text-center p-4"},ts={colspan:"7"},es={class:"flex justify-end"},ds={class:"ml-2"},as={class:"ml-2"},ls=s("td",{colspan:"5"},null,-1),os={colspan:"2"},is={__name:"PaidView",setup(rs){const r=I(!1),n=I(!1),m=A(),b=L(),{orderPaid:d}=c(b),{paidOrderHandler:h}=b,{listBank:x}=c(C()),{listAddress:g}=c(H());d.value._id||m.push("/");const y=u(()=>d.value.list.reduce((t,a)=>t+a.productId.price*a.quantity,0)),B=u(()=>{if(!d.value.bankId)return"";const t=x.value.filter(a=>a._id===d.value.bankId);return`${t[0].bankName} - ${t[0].bankNumber}`}),w=u(()=>{if(!d.value.addressId)return"";const t=g.value.filter(a=>a._id===d.value.addressId);return`${t[0].code} ${t[0].city} ${t[0].districts} ${t[0].street}`}),$=async t=>{r.value=!0,await h(t),r.value=!1},N=async t=>{n.value=!0,await h(t),n.value=!1};return(t,a)=>(i(),p("div",T,[_(S,{class:"mb-10"},{default:O(()=>[E,P,R]),_:1}),s("table",z,[D,s("tbody",null,[(i(!0),p(V,null,j(o(d).list,e=>{var f;return i(),p("tr",{key:e.productId._id},[s("td",F,[s("img",{src:e.productId.image,alt:e.productId.name,class:"w-1/2 mx-auto h-32 object-cover rounded-lg"},null,8,K)]),s("td",G,[s("p",null,l(e.productId.name),1)]),s("td",J,[s("div",M,[s("p",null,l(e.quantity),1)])]),s("td",Q,l(e.productId.price),1),s("td",U,l(e.quantity*e.productId.price),1),s("td",W,[s("p",null,l(e.productId.bankId.bankName),1),s("p",null,l(e.productId.bankId.bankNumber),1)]),s("td",X,[_(k,{text:"\u4ED8\u6B3E",class:q(["w-full mt-6",{"disabled: opacity-50":e.productId.paid}]),disabled:(f=e.productId)==null?void 0:f.paid,loading:r.value,onClick:ns=>$({orderId:o(d)._id,productId:e.productId._id})},null,8,["disabled","loading","class","onClick"])])])}),128)),s("tr",null,[Y,Z,s("td",ss,[s("p",null,l(o(y)),1)])]),s("tr",null,[s("td",ts,[s("div",es,[s("div",null,[s("p",null,[v(" \u4ED8\u6B3E\u5E33\u6236\uFF1A"),s("span",ds,l(o(B)),1)]),s("p",null,[v(" \u6536\u4EF6\u5730\u5740\uFF1A"),s("span",as,l(o(w)),1)])])])])]),s("tr",null,[ls,s("td",os,[_(k,{text:"\u5168\u90E8\u4ED8\u6B3E",class:"w-full mt-6",loading:n.value,onClick:a[0]||(a[0]=e=>N({orderId:o(d)._id,productId:""}))},null,8,["loading"])])])])])]))}};export{is as default};
