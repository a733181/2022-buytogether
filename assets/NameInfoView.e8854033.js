import{u as b,y as _,r as V,d as f,E as y,o as B,c as k,a as s,w as d,B as U,b as l,g as h,Z as c,f as v,L}from"./index.d530108d.js";import{v as i}from"./index.b211a59a.js";import{U as N}from"./UploadImage.9d9ff677.js";const T={class:"container py-10"},C={class:"flex"},E=l("p",null,"\u2002/\u2002\u500B\u4EBA\u8CC7\u8A0A\u7DE8\u8F2F",-1),H={class:"lg:w-1/2 mx-auto border-2 px-5 py-10 rounded-lg"},I=["onSubmit"],R={class:"flex mt-8 justify-center gap-5"},D={__name:"NameInfoView",setup(S){const u=b(),{editUserHander:w}=u,{users:m}=_(u),n=V(!1),e=f({name:m.value.name||"",image:m.value.image||"",password:""}),a=f({name:{error:!1,value:""},password:{error:!1,value:""}}),g=()=>i.isEmpty(e.name)?(a.name.value="\u70BA\u5FC5\u586B",a.name.error=!0,!0):i.isByteLength(e.name,{max:12})?e.password!==""&&!i.isByteLength(e.password,{min:4,max:20})?(a.password.value="\u9577\u5EA6\u5927\u65BC 4 \u5C0F\u65BC 20",a.password.error=!0,!0):!1:(a.name.value="\u9577\u5EA6\u5C0F\u65BC 12",a.name.error=!0,!0),x=async()=>{if(g())return;n.value=!0;const t=new FormData;t.append("name",e.name),t.append("password",e.password),e.image&&e.image!==m.value.image&&e.image.type.startsWith("image/")&&t.append("image",e.image),await w(t),n.value=!1};return(t,r)=>{const p=y("RouterLink");return B(),k("div",T,[s(U,{class:"mb-10"},{default:d(()=>[l("div",C,[s(p,{to:"/member/ship",class:"text-primary font-bold hover:scale-105"},{default:d(()=>[L("\u5E33\u6236")]),_:1}),E])]),_:1}),l("div",H,[l("form",{onSubmit:h(x,["prevent"])},[s(N,{modelValue:e.image,"onUpdate:modelValue":r[0]||(r[0]=o=>e.image=o),className:"avatar",id:"avatar",class:"mx-auto w-fit"},null,8,["modelValue"]),s(c,{title:"\u540D\u7A31",class:"mb-8 w-4/5 mx-auto",modelValue:e.name,"onUpdate:modelValue":r[1]||(r[1]=o=>e.name=o),error:a.name.error,errorText:a.name.value,onClick:r[2]||(r[2]=o=>a.name.error=!1),maxlength:"12"},null,8,["modelValue","error","errorText"]),s(c,{title:"\u5BC6\u78BC",class:"mb-8 w-4/5 mx-auto",type:"password",modelValue:e.password,"onUpdate:modelValue":r[3]||(r[3]=o=>e.password=o),error:a.password.error,errorText:a.password.value,onClick:r[4]||(r[4]=o=>a.password.error=!1)},null,8,["modelValue","error","errorText"]),l("div",R,[s(p,{to:"/member/ship",class:"w-1/4 block"},{default:d(()=>[s(v,{text:"\u53D6\u6D88",className:"btn-outline",class:"w-full"})]),_:1}),s(v,{type:"sumbit",text:"\u78BA\u5B9A",class:"w-1/4",disabled:n.value,loading:n.value},null,8,["disabled","loading"])])],40,I)])])}}};export{D as default};
