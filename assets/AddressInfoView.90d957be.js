import{Z as j,u as F,y as B,a3 as J,r as k,d as E,A as T,e as A,D as K,o as c,c as W,E as u,J as y,w as d,B as S,b as n,a,Y as i,m as $,f as H,g as Y,K as V,t as I}from"./index.5bd81ced.js";import{v as m}from"./index.3e23a1fd.js";const Z={class:"container py-10"},q={class:"flex"},G=n("p",null,"\u2002/\u2002",-1),O={class:"flex"},Q=n("p",null,"\u2002/\u2002",-1),X=["onSubmit"],ee=n("p",null,"\u8ACB\u9EDE\u9078\u57CE\u5E02\uFF0C\u9078\u64C7\u57CE\u5E02",-1),te=n("p",null,"\u8ACB\u9EDE\u9078\u5340\u9109\u93AE\uFF0C\u9078\u64C7\u5340\u9109\u93AE",-1),re={class:"flex justify-between mt-8"},ae={__name:"AddressInfoView",setup(se){var U,g;const L=j(),{districtsList:b}=L,P=F(),{users:p}=B(P),_=J(),{sumbitAddressHandler:R,cancelAddressHandler:z}=_,{editAddress:l}=B(_),x=k(((U=l.value)==null?void 0:U.phone)===p.value.phone),h=k(((g=l.value)==null?void 0:g.name)===p.value.name),v=k(!1),e=E({_id:l.value._id||"",userId:l.value.userId||null,city:l.value.city||"",districts:l.value.districts||"",street:l.value.street||"",name:l.value.name||"",phone:l.value.phone||"",preset:l.value.preset}),t=E({city:{error:!1,value:""},districts:{error:!1,value:""},street:{error:!1,value:""},name:{error:!1,value:""},phone:{error:!1,value:""}}),C=T(()=>e.districts&&e.districts.length>2?b.filter(r=>r.name===e.city)[0].districts.filter(r=>r.name===e.districts)[0].zip:""),w=T(()=>b.map(o=>o.name)),N=T(()=>e.city!==""?b.filter(o=>o.name===e.city)[0].districts.map(o=>o.name):[]);A(x,o=>{o?e.phone=p.value.phone:e.phone=""}),A(h,o=>{o?e.name=p.value.name||"":e.name=""});const D=()=>m.isEmpty(e.city)?(t.city.value="\u70BA\u5FC5\u586B",t.city.error=!0,!0):m.isEmpty(e.districts)?(t.districts.value="\u70BA\u5FC5\u586B",t.districts.error=!0,!0):m.isEmpty(e.street)?(t.street.value="\u70BA\u5FC5\u586B",t.street.error=!0,!0):m.isEmpty(e.phone)?(t.phone.value="\u70BA\u5FC5\u586B",t.phone.error=!0,!0):m.isEmpty(e.name)?(t.name.value="\u70BA\u5FC5\u586B",t.name.error=!0,!0):m.isMobilePhone(e.phone,["zh-TW"])?w.value.some(o=>o===e.city)?N.value.some(o=>o===e.districts)?!1:(t.districts.value="\u683C\u5F0F\u932F\u8AA4",t.districts.error=!0,!0):(t.city.value="\u683C\u5F0F\u932F\u8AA4",t.city.error=!0,!0):(t.phone.value="\u683C\u5F0F\u932F\u8AA4",t.phone.error=!0,!0),M=async()=>{D()||(v.value=!0,e.code=Number(C.value),await R(e),v.value=!1)};return(o,r)=>{const f=K("RouterLink");return c(),W("div",Z,[u(l).type!=="admin"?(c(),y(S,{key:0,class:"mb-10"},{default:d(()=>[n("div",q,[a(f,{to:"/member/ship",class:"text-primary font-bold hover:scale-105"},{default:d(()=>[V("\u5E33\u6236")]),_:1}),G,a(f,{to:"/member/addresslist",class:"hover:scale-105"},{default:d(()=>[V("\u5730\u5740\u5217\u8868")]),_:1}),n("p",null,I(u(l)._id?"\u2002/\u2002\u4FEE\u6539\u5730\u5740":"\u2002/\u2002\u65B0\u589E\u5730\u5740"),1)])]),_:1})):(c(),y(S,{key:1,class:"mb-10"},{default:d(()=>[n("div",O,[a(f,{to:"/member/shipadmin",class:"hover:scale-105"},{default:d(()=>[V("\u6703\u54E1")]),_:1}),Q,a(f,{to:"/member/adminaddress",class:"hover:scale-105"},{default:d(()=>[V("\u5730\u5740\u5217\u8868")]),_:1}),n("p",null,I(u(l)._id?"\u2002/\u2002\u4FEE\u6539\u5730\u5740":"\u2002/\u2002\u65B0\u589E\u5730\u5740"),1)])]),_:1})),n("form",{onSubmit:Y(M,["prevent"])},[a(i,{title:"\u90F5\u905E\u5340\u865F",disabled:!0,value:u(C)},null,8,["value"]),a(i,{title:"\u57CE\u5E02",modelValue:e.city,"onUpdate:modelValue":r[0]||(r[0]=s=>e.city=s),error:t.city.error,errorText:t.city.value,onClick:r[1]||(r[1]=s=>t.city.error=!1),select:u(w)},null,8,["modelValue","error","errorText","select"]),ee,a(i,{title:"\u5340\u9109\u93AE",modelValue:e.districts,"onUpdate:modelValue":r[2]||(r[2]=s=>e.districts=s),error:t.districts.error,errorText:t.districts.value,onClick:r[3]||(r[3]=s=>t.districts.error=!1),select:u(N)},null,8,["modelValue","error","errorText","select"]),te,a(i,{title:"\u8857\u9053",modelValue:e.street,"onUpdate:modelValue":r[4]||(r[4]=s=>e.street=s),error:t.street.error,errorText:t.street.value,onClick:r[5]||(r[5]=s=>t.street.error=!1)},null,8,["modelValue","error","errorText"]),u(l).type==="user"?(c(),y(i,{key:0,title:"\u540C\u5E33\u865F\u59D3\u540D",type:"checkbox",modelValue:h.value,"onUpdate:modelValue":r[6]||(r[6]=s=>h.value=s)},null,8,["modelValue"])):$("",!0),a(i,{title:"\u59D3\u540D",modelValue:e.name,"onUpdate:modelValue":r[7]||(r[7]=s=>e.name=s),error:t.name.error,errorText:t.name.value,onClick:r[8]||(r[8]=s=>t.name.error=!1)},null,8,["modelValue","error","errorText"]),u(l).type==="user"?(c(),y(i,{key:1,title:"\u540C\u5E33\u865F\u96FB\u8A71",type:"checkbox",modelValue:x.value,"onUpdate:modelValue":r[9]||(r[9]=s=>x.value=s)},null,8,["modelValue"])):$("",!0),a(i,{title:"\u96FB\u8A71",modelValue:e.phone,"onUpdate:modelValue":r[10]||(r[10]=s=>e.phone=s),error:t.phone.error,errorText:t.phone.value,onClick:r[11]||(r[11]=s=>t.phone.error=!1)},null,8,["modelValue","error","errorText"]),a(i,{title:"\u9810\u8A2D",type:"checkbox",modelValue:e.preset,"onUpdate:modelValue":r[12]||(r[12]=s=>e.preset=s),id:"addressPreset"},null,8,["modelValue"]),n("div",re,[a(H,{text:"\u53D6\u6D88",className:"btn-outline",class:"w-1/3",onClick:u(z)},null,8,["onClick"]),a(H,{type:"sumbit",text:"\u78BA\u5B9A",class:"w-1/3",disabled:v.value,loading:v.value},null,8,["disabled","loading"])])],40,X)])}}};export{ae as default};
