import{_ as Q}from"./chat.e108b74e.js";import{_ as O,a as W,T as X}from"./TheMoreProduct.88377d38.js";import{o as r,c as n,b as e,p as Z,q as ee,s as se,x as te,y as $,u as ae,z as oe,A as le,e as re,r as b,C as H,D as ne,E as ie,a as u,w as y,B as ce,t as c,F as t,m as v,f as ue,G as j,H as de,I as V,J as U,K as me,P as pe,L as _e}from"./index.96a46153.js";import{_ as N}from"./SendProductMessage.45b51bab.js";import{u as ge,_ as ve}from"./TheModel.4f838ef1.js";import"./index.05e7650d.js";import"./TheTextarea.e17d92b8.js";const he=""+new URL("exclamation-solid.0ec4ead1.svg",import.meta.url).href,fe=""+new URL("store-solid.29345756.svg",import.meta.url).href,be={class:"relative overflow-hidden pb-[56.25%]"},ye={__name:"YouToLink",props:{data:String},setup(L){const w=`https://www.youtube.com/embed/${L.data}`;return(x,k)=>(r(),n("div",be,[e("iframe",{class:"absolute top-0 left-0 w-full h-full",width:"560",height:"315",src:w,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})]))}},we={class:"container pt-44 lg:pt-32 pb-10"},xe={class:"flex items-center"},ke=e("p",null,"\u2002/\u2002",-1),Ce={class:"flex flex-col lg:flex-row gap-8 items-stretch mb-20"},Ie={class:"lg:w-2/5 flex flex-col"},$e={class:"font-bold text-2xl mb-3"},He={class:"text-primary text-xl mb-5"},Le={class:"mb-1"},Se={class:"mb-6"},Re={class:"mb-6 whitespace-pre-line"},Be={key:0,class:"flex items-center gap-8 my-5"},Me=["src","alt"],Te={class:"mb-2 text-lg"},je={class:"flex gap-3"},Ve=e("img",{src:fe,alt:"more",class:"w-4 h-4"},null,-1),Ue={class:"flex mt-auto item-center justify-center gap-5"},Ne={class:"flex items-center border-2 border-primary rounded-lg w-1/3 justify-center"},Pe={class:"flex-1 -order-1 lg:order-1"},Ae={class:"relative h-[490px] mb-5"},Fe={key:0},qe=["src","alt"],ze=["src","alt"],De=["src","onClick"],Ee={class:"mb-20"},Ye=e("p",{class:"mb-6 text-2xl pb-2 border-b-2 border-primary"},"\u554F\u8207\u7B54",-1),Ge={key:0,class:"mb-6"},Je={class:"w-4/5 whitespace-pre"},Ke=e("p",null,"\u554F\uFF1A",-1),Qe={class:"ml-2 whitespace-pre-line"},Oe={key:0,class:"ml-auto w-4/5 bg-gray-200 rounded-lg p-2 flex justify-end"},We=e("p",null,"\u5718\u4E3B\u7B54\uFF1A",-1),Xe={class:"ml-2 whitespace-pre-line"},Ze={class:"bg-gray-100 rounded-lg p-6"},es=e("p",{class:"text-xl mb-4"},"\u63D0\u51FA\u554F\u984C",-1),ss=e("p",{class:"mb-4"},"\u70BA\u4FDD\u969C\u6703\u54E1\u4EA4\u6613\u5B89\u5168\uFF0C\u7559\u8A00\u8ACB\u52FF\u586B\u5BEB\u500B\u4EBA\u8CC7\u6599\u3002",-1),ts={class:"bg-white rounded-lg"},ds={__name:"ProductView",setup(L){const d=Z(),{clickAddCartHandler:w}=ee(),x=se(),k=te(),{getSellProdctHander:S}=x,{sellProduct:s}=$(x),{sumbitMessageHandler:P,getProductMessageHandler:C}=k,{messageProduct:R,messagePage:p}=$(k),{toggleShow:h}=$(ge()),{isLoginHandler:A}=ae(),{createReporteHandler:F}=oe(),{addChatUserHandler:q}=le();S(d.params.id),C(d.params.id),re(()=>d.params.id,o=>{o&&d.path.includes("/products")&&(S(o),C(o))});const I=b(!1),f=b(!1),m=b(1),_=H(()=>s!=null&&s.value.images?s==null?void 0:s.value.images.length:0),i=b(s.value.youtubeId?_.value+1:0),z=H(()=>i.value===0?s.value.image:s.value.images[i.value-1]),D=H(()=>{if(s!=null&&s.value.images)return`grid-template-columns: repeat(${_.value+1}, minmax(0, 1fr));`}),B=o=>{const g=!!s.value.youtubeId?_.value+1:_.value;o===1?i.value>=g?i.value=0:i.value++:i.value<=0?i.value=g:i.value--},M=o=>{if(m.value+o<=0){m.value=1;return}if(m.value+o>s.value.remaining){m.value=s.value.remaining;return}m.value+=o},E=async o=>{I.value=!0;const a={message:o.message,prodcutId:d.params.id};await P(a),I.value=!1},Y=()=>{!A()||(h.value=!h.value)},G=async o=>{h.value=!h.value;const a={message:o.message,productId:d.params.id};F(a)},J=o=>{p.value.current=o,C(d.params.id)},K=async o=>{f.value=!0,await w(o),f.value=!1};return ne(()=>{p.value.current=1}),(o,a)=>{const g=ie("RouterLink");return r(),n("div",we,[u(ce,{class:"mb-10"},{default:y(()=>[e("div",xe,[u(g,{to:"/",class:"text-primary font-bold break-normal hover:opacity-60"},{default:y(()=>[_e("\u7CBE\u9078\u5718\u8CFC")]),_:1}),ke,e("p",null,c(t(s).name),1)])]),_:1}),e("div",Ce,[e("div",Ie,[e("h1",$e,c(t(s).name),1),e("p",He,"$"+c(t(s).price),1),e("p",Le," \u92B7\u552E\u6578\u91CF\uFF1A"+c(t(s).maxNumber-t(s).remaining),1),e("p",Se,"\u5269\u9918\u6578\u91CF\uFF1A"+c(t(s).remaining),1),e("p",Re,c(t(s).description),1),t(s).userId?(r(),n("div",Be,[e("img",{src:t(s).userId.image,alt:t(s).userId.name,class:"w-16 h-16 rounded-full object-cover"},null,8,Me),e("div",null,[e("p",Te,c(t(s).userId.name),1),e("div",je,[e("img",{src:Q,alt:"chat",class:"w-4 hover:opacity-60",onClick:a[0]||(a[0]=l=>t(q)({toUserId:t(s).userId._id,name:t(s).userId.name,image:t(s).userId.image}))}),e("img",{src:he,alt:"\u6AA2\u8209",class:"w-4 h-4 hover:opacity-60",onClick:Y}),u(g,{to:`/memberhome/${t(s).userId._id}`},{default:y(()=>[Ve]),_:1},8,["to"])])])])):v("",!0),e("div",Ue,[e("div",Ne,[e("img",{src:O,class:"w-5 hover:opacity-60 block mr-auto ml-2",onClick:a[1]||(a[1]=l=>M(-1)),alt:"\u6E1B\u5C11\u6578\u91CF",title:"\u6E1B\u5C11\u6578\u91CF"}),e("p",null,c(m.value),1),e("img",{src:W,class:"w-5 hover:opacity-60 block ml-auto mr-2",onClick:a[2]||(a[2]=l=>M(1)),alt:"\u589E\u52A0\u6578\u91CF",title:"\u589E\u52A0\u6578\u91CF"})]),u(ue,{text:"\u52A0\u5165\u8CFC\u7269\u8ECA",class:"w-1/3",disabled:f.value,loading:f.value,onClick:a[3]||(a[3]=l=>K({id:t(s)._id,quantity:m.value}))},null,8,["disabled","loading"])])]),e("div",Pe,[e("div",Ae,[i.value===t(_)+1?(r(),n("div",Fe,[u(ye,{data:t(s).youtubeId,class:"w-[90%] mx-auto"},null,8,["data"])])):(r(),n("img",{key:1,class:"rounded-xl object-contain w-full h-full mb-5",src:t(z),alt:t(s).name},null,8,qe)),e("img",{src:j,alt:"arrow",class:"w-6 absolute top-1/2 left-0 -translate-y-1/2 hover:opacity-60",onClick:a[4]||(a[4]=l=>B(-1))}),e("img",{src:j,alt:"arrow",class:"w-6 absolute rotate-180 top-1/2 right-0 -translate-y-1/2 hover:opacity-60",onClick:a[5]||(a[5]=l=>B(1))})]),e("div",{class:"grid gap-2",style:de(t(D))},[e("div",null,[e("img",{class:"w-full h-full object-cover",src:t(s).image,alt:t(s).name,onClick:a[6]||(a[6]=l=>i.value=0)},null,8,ze)]),t(s).images?(r(!0),n(V,{key:0},U(t(s).images,(l,T)=>(r(),n("div",null,[(r(),n("img",{src:l,key:T,class:"w-full h-full object-cover",onClick:as=>i.value=T+1},null,8,De))]))),256)):v("",!0)],4)])]),e("div",Ee,[Ye,t(R).length?(r(),n("ul",Ge,[(r(!0),n(V,null,U(t(R),l=>(r(),n("li",{key:l._id,class:"border-2 rounded-lg mb-2 px-4 py-2"},[e("div",Je,[Ke,e("p",Qe,c(l.message),1)]),l.reply?(r(),n("div",Oe,[We,e("p",Xe,c(l.reply||""),1)])):v("",!0)]))),128))])):v("",!0),t(p).total>1?(r(),me(pe,{key:1,class:"ml-auto",total:t(p).total,current:t(p).current,onCurrent:J},null,8,["total","current"])):v("",!0),e("div",Ze,[es,ss,e("div",ts,[u(N,{class:"lg:w-1/2 mx-auto pt-2 pb-12 px-8",classText:"h-52",onMessage:E,isLoading:I.value},null,8,["isLoading"])])])]),u(ve,null,{default:y(()=>[u(N,{onMessage:G,class:"lg:w-1/2 mx-auto",classText:"h-40"})]),_:1}),u(X,{category:t(s).category},null,8,["category"])])}}};export{ds as default};
