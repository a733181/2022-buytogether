import{u as b,y as x,r as w,d as c,D as h,o as y,c as V,a as t,w as m,B,b as r,g as k,Y as N,f,K as U}from"./index.8e8948d6.js";import{v as p}from"./index.c6ade52a.js";import{U as L}from"./UploadImage.8f3343d0.js";const T={class:"container py-10"},C={class:"flex"},H=r("p",null,"\u2002/\u2002\u540D\u7A31\u7DE8\u8F2F",-1),I={class:"lg:w-1/2 mx-auto border-2 px-5 py-4"},R=r("h2",{class:"mb-8 text-2xl"},"\u4FEE\u6539\u8CC7\u8A0A",-1),S=["onSubmit"],D={class:"flex justify-between mt-8"},M={__name:"NameInfoView",setup(E){const u=b(),{editUserHander:v}=u,{users:i}=x(u),l=w(!1),e=c({name:i.value.name||"",image:i.value.image||""}),a=c({error:!1,value:""}),_=()=>p.isEmpty(e.name)?(a.value="\u70BA\u5FC5\u586B",a.error=!0,!0):p.isByteLength(e.name,{max:12})?!1:(a.value="\u9577\u5EA6\u5C0F\u65BC 12",a.error=!0,!0),g=async()=>{if(_())return;l.value=!0;const o=new FormData;e.image&&e.image!==i.value.image&&e.image.type.startsWith("image/")?(o.append("name",e.name),o.append("image",e.image)):o.append("name",e.name),await v(o),l.value=!1};return(o,s)=>{const d=h("RouterLink");return y(),V("div",T,[t(B,{class:"mb-10"},{default:m(()=>[r("div",C,[t(d,{to:"/member/ship",class:"text-primary font-bold hover:scale-105"},{default:m(()=>[U("\u5E33\u6236")]),_:1}),H])]),_:1}),r("div",I,[R,r("form",{onSubmit:k(g,["prevent"])},[t(L,{modelValue:e.image,"onUpdate:modelValue":s[0]||(s[0]=n=>e.image=n),className:"avatar",id:"avatar",class:"mx-auto w-fit"},null,8,["modelValue"]),t(N,{title:"\u540D\u7A31",class:"mb-8",modelValue:e.name,"onUpdate:modelValue":s[1]||(s[1]=n=>e.name=n),error:a.error,errorText:a.value,onClick:s[2]||(s[2]=n=>a.error=!1),maxlength:"12"},null,8,["modelValue","error","errorText"]),r("div",D,[t(d,{to:"/member/ship",class:"w-1/3 block"},{default:m(()=>[t(f,{text:"\u53D6\u6D88",className:"btn-outline",class:"w-full"})]),_:1}),t(f,{type:"sumbit",text:"\u78BA\u5B9A",class:"w-1/3",disabled:l.value,loading:l.value},null,8,["disabled","loading"])])],40,S)])])}}};export{M as default};
