import{u as x,y as b,r as w,d as c,E as y,o as V,c as h,a as t,w as i,B,b as o,g as k,Z as N,f as p,L as U}from"./index.bec5e42a.js";import{v as f}from"./index.052d5bcf.js";import{U as L}from"./UploadImage.dec0f42c.js";const T={class:"container py-10"},C={class:"flex"},E=o("p",null,"\u2002/\u2002\u540D\u7A31\u7DE8\u8F2F",-1),H={class:"lg:w-1/2 mx-auto border-2 px-5 py-10 rounded-lg"},I=["onSubmit"],R={class:"flex mt-8 justify-center gap-5"},M={__name:"NameInfoView",setup(S){const u=x(),{editUserHander:v}=u,{users:m}=b(u),l=w(!1),e=c({name:m.value.name||"",image:m.value.image||""}),a=c({error:!1,value:""}),g=()=>f.isEmpty(e.name)?(a.value="\u70BA\u5FC5\u586B",a.error=!0,!0):f.isByteLength(e.name,{max:12})?!1:(a.value="\u9577\u5EA6\u5C0F\u65BC 12",a.error=!0,!0),_=async()=>{if(g())return;l.value=!0;const r=new FormData;e.image&&e.image!==m.value.image&&e.image.type.startsWith("image/")?(r.append("name",e.name),r.append("image",e.image)):r.append("name",e.name),await v(r),l.value=!1};return(r,s)=>{const d=y("RouterLink");return V(),h("div",T,[t(B,{class:"mb-10"},{default:i(()=>[o("div",C,[t(d,{to:"/member/ship",class:"text-primary font-bold hover:scale-105"},{default:i(()=>[U("\u5E33\u6236")]),_:1}),E])]),_:1}),o("div",H,[o("form",{onSubmit:k(_,["prevent"])},[t(L,{modelValue:e.image,"onUpdate:modelValue":s[0]||(s[0]=n=>e.image=n),className:"avatar",id:"avatar",class:"mx-auto w-fit"},null,8,["modelValue"]),t(N,{title:"\u540D\u7A31",class:"mb-8 w-4/5 mx-auto",modelValue:e.name,"onUpdate:modelValue":s[1]||(s[1]=n=>e.name=n),error:a.error,errorText:a.value,onClick:s[2]||(s[2]=n=>a.error=!1),maxlength:"12"},null,8,["modelValue","error","errorText"]),o("div",R,[t(d,{to:"/member/ship",class:"w-1/4 block"},{default:i(()=>[t(p,{text:"\u53D6\u6D88",className:"btn-outline",class:"w-full"})]),_:1}),t(p,{type:"sumbit",text:"\u78BA\u5B9A",class:"w-1/4",disabled:l.value,loading:l.value},null,8,["disabled","loading"])])],40,I)])])}}};export{M as default};
