import{u as b,A as _,r as V,e as f,G as y,a as B,c as h,b as s,w as i,B as k,d as l,i as N,a0 as c,h as v,N as U}from"./index.eb53f5b0.js";import{v as d}from"./index.785d6995.js";import{U as T}from"./UploadImage.a928883d.js";const L={class:"container py-10"},C={class:"flex"},H=l("p",null,"\u2002/\u2002\u500B\u4EBA\u8CC7\u8A0A\u7DE8\u8F2F",-1),I={class:"lg:w-1/2 mx-auto border-2 px-5 py-10 rounded-lg"},R=["onSubmit"],S={class:"flex mt-8 justify-center gap-5"},A={__name:"NameInfoView",setup(E){const u=b(),{editUserHander:w}=u,{users:m}=_(u),n=V(!1),e=f({name:m.value.name||"",image:m.value.image||"",password:""}),a=f({name:{error:!1,value:""},password:{error:!1,value:""}}),g=()=>d.isEmpty(e.name)?(a.name.value="\u70BA\u5FC5\u586B",a.name.error=!0,!0):d.isByteLength(e.name,{max:12})?e.password!==""&&!d.isByteLength(e.password,{min:4,max:20})?(a.password.value="\u9577\u5EA6\u5927\u65BC 4 \u5C0F\u65BC 20",a.password.error=!0,!0):!1:(a.name.value="\u9577\u5EA6\u5C0F\u65BC 12",a.name.error=!0,!0),x=async()=>{if(g())return;n.value=!0;const o=new FormData;o.append("name",e.name),o.append("password",e.password),e.image&&e.image!==m.value.image&&e.image.type.startsWith("image/")&&o.append("image",e.image),await w(o),n.value=!1};return(o,r)=>{const p=y("RouterLink");return B(),h("div",L,[s(k,{class:"mb-10"},{default:i(()=>[l("div",C,[s(p,{to:"/member/ship",class:"text-primary font-bold hover:scale-105"},{default:i(()=>[U("\u5E33\u6236")]),_:1}),H])]),_:1}),l("div",I,[l("form",{onSubmit:N(x,["prevent"])},[s(T,{modelValue:e.image,"onUpdate:modelValue":r[0]||(r[0]=t=>e.image=t),className:"avatar",id:"avatar",class:"mx-auto w-fit"},null,8,["modelValue"]),s(c,{title:"\u540D\u7A31",class:"mb-8 w-4/5 mx-auto",modelValue:e.name,"onUpdate:modelValue":r[1]||(r[1]=t=>e.name=t),error:a.name.error,errorText:a.name.value,onClick:r[2]||(r[2]=t=>a.name.error=!1),maxlength:"12"},null,8,["modelValue","error","errorText"]),s(c,{title:"\u5BC6\u78BC",class:"mb-8 w-4/5 mx-auto",type:"password",modelValue:e.password,"onUpdate:modelValue":r[3]||(r[3]=t=>e.password=t),error:a.password.error,errorText:a.password.value,onClick:r[4]||(r[4]=t=>a.password.error=!1)},null,8,["modelValue","error","errorText"]),l("div",S,[s(p,{to:"/member/ship",class:"w-1/4 block"},{default:i(()=>[s(v,{text:"\u53D6\u6D88",className:"btn-outline",class:"w-full"})]),_:1}),s(v,{type:"sumbit",text:"\u78BA\u5B9A",class:"w-1/4",disabled:n.value,loading:n.value},null,8,["disabled","loading"])])],40,R)])])}}};export{A as default};
