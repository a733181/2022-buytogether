import{_ as Q,a as O,T as W}from"./TheMoreProduct.35516422.js";import{o,c as n,b as e,p as X,q as Z,s as ee,x as se,y as I,u as te,z as ae,e as le,r as b,A as H,C as oe,D as re,a as c,w as y,B as ne,t as u,E as t,m as v,f as ie,F as j,G as ce,H as V,I as N,J as ue,P as de,K as P}from"./index.5bd81ced.js";import{_ as A}from"./SendProductMessage.0a7b62cb.js";import{u as me,_ as pe}from"./TheModel.81b5da86.js";import"./index.3e23a1fd.js";import"./TheTextarea.c1a5fd41.js";const _e={class:"relative overflow-hidden pb-[56.25%]"},ge={__name:"YouToLink",props:{data:String},setup(S){const w=`https://www.youtube.com/embed/${S.data}`;return(x,k)=>(o(),n("div",_e,[e("iframe",{class:"absolute top-0 left-0 w-full h-full",width:"560",height:"315",src:w,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})]))}},ve={class:"container pt-44 lg:pt-32 pb-10"},he={class:"flex items-center"},fe=e("p",null,"\u2002/\u2002",-1),be={class:"flex flex-col lg:flex-row gap-8 items-stretch mb-20"},ye={class:"lg:w-2/5 flex flex-col"},we={class:"font-bold text-2xl mb-3"},xe={class:"mb-4 flex justify-between items-center"},ke={class:"text-primary text-xl"},Ce={class:"mb-6"},$e={class:"mb-6 whitespace-pre-line"},Ie={key:0,class:"flex items-center gap-4 my-5"},He=e("p",null,"\u5718\u8CFC\u4E3B\uFF1A",-1),Se=["src","alt"],Le={class:"mt-auto w-full"},Be={class:"flex items-center justify-between mb-6"},Me={class:"flex-1 -order-1 lg:order-1"},Re={class:"relative h-[490px] mb-5"},Te={key:0},je=["src","alt"],Ve=["src","alt"],Ne=["src","onClick"],Pe={class:"mb-20"},Ae=e("p",{class:"mb-6 text-2xl pb-2 border-b-2 border-primary"},"\u554F\u8207\u7B54",-1),Fe={key:0,class:"mb-6"},qe={class:"w-4/5 whitespace-pre"},ze=e("p",null,"\u554F\uFF1A",-1),De={class:"ml-2 whitespace-pre-line"},Ee={key:0,class:"ml-auto w-4/5 bg-gray-200 rounded-lg p-2 flex justify-end"},Ue=e("p",null,"\u5718\u4E3B\u7B54\uFF1A",-1),Ye={class:"ml-2 whitespace-pre-line"},Ge={class:"bg-gray-100 rounded-lg p-6"},Je=e("p",{class:"text-xl mb-4"},"\u63D0\u51FA\u554F\u984C",-1),Ke=e("p",{class:"mb-4"},"\u70BA\u4FDD\u969C\u6703\u54E1\u4EA4\u6613\u5B89\u5168\uFF0C\u7559\u8A00\u8ACB\u52FF\u586B\u5BEB\u500B\u4EBA\u8CC7\u6599\u3002",-1),Qe={class:"bg-white rounded-lg"},as={__name:"ProductView",setup(S){const d=X(),{clickAddCartHandler:w}=Z(),x=ee(),k=se(),{getSellProdctHander:L}=x,{sellProduct:s}=I(x),{sumbitMessageHandler:F,getProductMessageHandler:C}=k,{messageProduct:B,messagePage:p}=I(k),{toggleShow:h}=I(me()),{isLoginHandler:q}=te(),{createReporteHandler:z}=ae();L(d.params.id),C(d.params.id),le(()=>d.params.id,a=>{a&&d.path.includes("/products")&&(L(a),C(a))});const $=b(!1),f=b(!1),m=b(1),_=H(()=>s!=null&&s.value.images?s==null?void 0:s.value.images.length:0),i=b(s.value.youtubeId?_.value+1:0),D=H(()=>i.value===0?s.value.image:s.value.images[i.value-1]),E=H(()=>{if(s!=null&&s.value.images)return`grid-template-columns: repeat(${_.value+1}, minmax(0, 1fr));`}),M=a=>{const g=!!s.value.youtubeId?_.value+1:_.value;a===1?i.value>=g?i.value=0:i.value++:i.value<=0?i.value=g:i.value--},R=a=>{if(m.value+a<=0){m.value=1;return}if(m.value+a>s.value.remaining){m.value=s.value.remaining;return}m.value+=a},U=async a=>{$.value=!0;const l={message:a.message,prodcutId:d.params.id};await F(l),$.value=!1},Y=()=>{!q()||(h.value=!h.value)},G=async a=>{h.value=!h.value;const l={message:a.message,productId:d.params.id};z(l)},J=a=>{p.value.current=a,C(d.params.id)},K=async a=>{f.value=!0,await w(a),f.value=!1};return oe(()=>{p.value.current=1}),(a,l)=>{const g=re("RouterLink");return o(),n("div",ve,[c(ne,{class:"mb-10"},{default:y(()=>[e("div",he,[c(g,{to:"/",class:"text-primary font-bold break-normal hover:opacity-60"},{default:y(()=>[P("\u7CBE\u9078\u5718\u8CFC")]),_:1}),fe,e("p",null,u(t(s).name),1)])]),_:1}),e("div",be,[e("div",ye,[e("h1",we,u(t(s).name),1),e("div",xe,[e("p",ke,"$"+u(t(s).price),1),e("p",{class:"-mb-2 hover:opacity-60 text-gray-400",onClick:Y}," \u6AA2\u8209 ")]),e("p",Ce," \u92B7\u91CF\uFF1A"+u(t(s).maxNumber-t(s).remaining),1),e("p",$e,u(t(s).description),1),t(s).userId?(o(),n("div",Ie,[He,e("img",{src:t(s).userId.image,alt:t(s).userId.name,class:"w-16 h-16 rounded-full object-cover"},null,8,Se),e("p",null,u(t(s).userId.name),1),c(g,{to:`/memberhome/${t(s).userId._id}`,class:"text-primary"},{default:y(()=>[P("\u66F4\u591A\u5546\u54C1")]),_:1},8,["to"])])):v("",!0),e("div",Le,[e("div",Be,[e("img",{src:Q,class:"w-5 hover:opacity-60",onClick:l[0]||(l[0]=r=>R(-1)),alt:"\u6E1B\u5C11\u6578\u91CF",title:"\u6E1B\u5C11\u6578\u91CF"}),e("p",null,u(m.value),1),e("img",{src:O,class:"w-5 hover:opacity-60",onClick:l[1]||(l[1]=r=>R(1)),alt:"\u589E\u52A0\u6578\u91CF",title:"\u589E\u52A0\u6578\u91CF"})]),c(ie,{text:"\u52A0\u5165\u8CFC\u7269\u8ECA",class:"w-full",disabled:f.value,loading:f.value,onClick:l[2]||(l[2]=r=>K({id:t(s)._id,quantity:m.value}))},null,8,["disabled","loading"])])]),e("div",Me,[e("div",Re,[i.value===t(_)+1?(o(),n("div",Te,[c(ge,{data:t(s).youtubeId},null,8,["data"])])):(o(),n("img",{key:1,class:"rounded-xl object-contain w-full h-full mb-5",src:t(D),alt:t(s).name},null,8,je)),e("img",{src:j,alt:"arrow",class:"w-6 absolute top-1/2 left-0 -translate-y-1/2 hover:opacity-60",onClick:l[3]||(l[3]=r=>M(-1))}),e("img",{src:j,alt:"arrow",class:"w-6 absolute rotate-180 top-1/2 right-0 -translate-y-1/2 hover:opacity-60",onClick:l[4]||(l[4]=r=>M(1))})]),e("div",{class:"grid gap-2",style:ce(t(E))},[e("div",null,[e("img",{class:"w-full h-full object-cover",src:t(s).image,alt:t(s).name,onClick:l[5]||(l[5]=r=>i.value=0)},null,8,Ve)]),t(s).images?(o(!0),n(V,{key:0},N(t(s).images,(r,T)=>(o(),n("div",null,[(o(),n("img",{src:r,key:T,class:"w-full h-full object-cover",onClick:Oe=>i.value=T+1},null,8,Ne))]))),256)):v("",!0)],4)])]),e("div",Pe,[Ae,t(B).length?(o(),n("ul",Fe,[(o(!0),n(V,null,N(t(B),r=>(o(),n("li",{key:r._id,class:"border-2 rounded-lg mb-2 px-4 py-2"},[e("div",qe,[ze,e("p",De,u(r.message),1)]),r.reply?(o(),n("div",Ee,[Ue,e("p",Ye,u(r.reply||""),1)])):v("",!0)]))),128))])):v("",!0),t(p).total>1?(o(),ue(de,{key:1,class:"ml-auto",total:t(p).total,current:t(p).current,onCurrent:J},null,8,["total","current"])):v("",!0),e("div",Ge,[Je,Ke,e("div",Qe,[c(A,{class:"lg:w-1/2 mx-auto pt-2 pb-12 px-8",classText:"h-52",onMessage:U,isLoading:$.value},null,8,["isLoading"])])])]),c(pe,null,{default:y(()=>[c(A,{onMessage:G,class:"lg:w-1/2 mx-auto",classText:"h-40"})]),_:1}),c(W,{category:t(s).category},null,8,["category"])])}}};export{as as default};
