import{r as v,a5 as A,y as c,a2 as L,a3 as O,C as u,o as i,c as p,a as _,w as S,B as V,b as s,I as j,J as q,F as o,t as l,L as k,f as x,n as H}from"./index.4b815274.js";import{u as T}from"./orders.7dddf2e8.js";const F={class:"container pt-44 lg:pt-32 pb-10"},P=s("span",{class:"text-primary font-bold"},"\u8CFC\u7269\u8ECA",-1),R=s("span",null,"\u2002/\u2002",-1),z=s("span",null,"\u4ED8\u6B3E",-1),D={class:"w-full"},E=s("thead",null,[s("tr",null,[s("th",{class:"border-2 p-2"},"\u5716\u7247"),s("th",{class:"border-2 p-2"},"\u540D\u7A31"),s("th",{class:"border-2 p-2"},"\u6578\u91CF"),s("th",{class:"border-2 p-2"},"\u55AE\u50F9"),s("th",{class:"border-2 p-2"},"\u5C0F\u8A08"),s("th",{class:"border-2 p-2"},"\u6536\u6B3E\u5E33\u6236"),s("th",{class:"border-2 p-2"},"\u4ED8\u6B3E")])],-1),J={class:"border-2 p-2"},G=["src","alt"],K={class:"border-2 p-2 text-center"},M={class:"border-2 p-2"},Q={class:"flex justify-center items-center gap-3 lg:gap-6"},U={class:"border-2 p-2 text-center"},W={class:"border-2 p-2 text-center"},X={class:"border-2 p-2 text-center"},Y={class:"border-2 p-2"},Z=s("td",{colspan:"3"},null,-1),ss=s("td",{class:"text-center p-4"},[s("p",null,"\u7E3D\u8A08")],-1),ts={class:"text-center p-4"},es={colspan:"7"},ds={class:"flex justify-end"},as={class:"ml-2"},ls={class:"ml-2"},os=s("td",{colspan:"5"},null,-1),rs={colspan:"2"},ps={__name:"PaidView",setup(ns){const r=v(!1),n=v(!1),g=A(),b=T(),{orderPaid:d}=c(b),{paidOrderHandler:h}=b,{listBank:m}=c(L()),{listAddress:y}=c(O());d.value._id||g.push("/");const B=u(()=>d.value.list.reduce((e,a)=>e+a.productId.price*a.quantity,0)),w=u(()=>{if(!d.value.bankId)return"";const e=m.value.filter(a=>a._id===d.value.bankId);return`${e[0].bankName} - ${e[0].bankNumber}`}),$=u(()=>{if(!d.value.addressId)return"";const e=y.value.filter(a=>a._id===d.value.addressId);return`${e[0].code} ${e[0].city} ${e[0].districts} ${e[0].street}`}),N=async e=>{r.value=!0,await h(e),r.value=!1},C=async e=>{n.value=!0,await h(e),n.value=!1};return(e,a)=>(i(),p("div",F,[_(V,{class:"mb-10"},{default:S(()=>[P,R,z]),_:1}),s("table",D,[E,s("tbody",null,[(i(!0),p(j,null,q(o(d).list,t=>{var f,I;return i(),p("tr",{key:t.productId._id},[s("td",J,[s("img",{src:t.productId.image,alt:t.productId.name,class:"w-1/2 mx-auto h-32 object-cover rounded-lg"},null,8,G)]),s("td",K,[s("p",null,l(t.productId.name),1)]),s("td",M,[s("div",Q,[s("p",null,l(t.quantity),1)])]),s("td",U,l(t.productId.price),1),s("td",W,l(t.quantity*t.productId.price),1),s("td",X,[s("p",null,l(t.productId.bankId.bankName),1),s("p",null,l(t.productId.bankId.bankNumber),1)]),s("td",Y,[_(x,{text:(f=t.productId)!=null&&f.paid?"\u5DF2\u4ED8\u6B3E":"\u672A\u4ED8\u6B3E",class:H(["w-full mt-6",{"disabled: opacity-50":t.productId.paid}]),disabled:(I=t.productId)==null?void 0:I.paid,loading:r.value,onClick:cs=>N({orderId:o(d)._id,productId:t.productId._id})},null,8,["text","disabled","loading","class","onClick"])])])}),128)),s("tr",null,[Z,ss,s("td",ts,[s("p",null,l(o(B)),1)])]),s("tr",null,[s("td",es,[s("div",ds,[s("div",null,[s("p",null,[k(" \u4ED8\u6B3E\u5E33\u6236\uFF1A"),s("span",as,l(o(w)),1)]),s("p",null,[k(" \u6536\u4EF6\u5730\u5740\uFF1A"),s("span",ls,l(o($)),1)])])])])]),s("tr",null,[os,s("td",rs,[_(x,{text:"\u5168\u90E8\u4ED8\u6B3E",class:"w-full mt-6",loading:n.value,onClick:a[0]||(a[0]=t=>C({orderId:o(d)._id,productId:""}))},null,8,["loading"])])])])])]))}};export{ps as default};
