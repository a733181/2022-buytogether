import{_ as R}from"./edit.0cb17a6d.js";import{_ as A}from"./delete.d6462d7c.js";import{s as M,Z as j,z,y as f,r as x,A as E,o as n,c as u,a as i,w as S,B as T,E as p,a0 as F,b as s,H as k,I as C,t as r,n as b,f as P}from"./index.e84451ca.js";import{u as U,_ as Z}from"./TheModel.a73b621e.js";const q={class:"container py-10"},G=s("p",{class:"text-primary font-bold"},"\u5546\u54C1\u7BA1\u7406",-1),J={class:"overflow-auto"},K={class:"w-full table-auto"},O=s("thead",null,[s("tr",null,[s("th",{class:"border-2 p-2"},"\u6703\u54E1ID"),s("th",{class:"border-2 p-2"},"\u4E3B\u5716"),s("th",{class:"border-2 p-2"},"\u540D\u7A31"),s("th",{class:"border-2 p-2"},"\u50F9\u683C"),s("th",{class:"border-2 p-2"},"\u5206\u985E"),s("th",{class:"border-2 p-2"},"\u4E0A\u4E0B\u67B6"),s("th",{class:"border-2 p-2"},"\u92B7\u91CF"),s("th",{class:"border-2 p-2"},"\u5269\u9918\u6578\u91CF"),s("th",{class:"border-2 p-2"},"\u6AA2\u8209"),s("th",{class:"border-2 p-2"},"\u8A2D\u5B9A")])],-1),Q={class:"border-2 p-2 text-center"},W={class:"border-2 p-2"},X=["src","alt"],Y={class:"border-2 p-2 text-center"},ss={class:"border-2 p-2 text-center"},ts={class:"border-2 p-2 text-center"},es={class:"border-2 p-2 text-center"},os={class:"border-2 p-2 text-center"},rs={class:"border-2 p-2 text-center"},ls=["onClick"],as={class:"border-2 p-2"},ds={class:"flex gap-4 items-center justify-center flex-col lg:flex-row"},cs=["onClick"],ns=["onClick"],us={class:"overflow-auto"},is={class:"mt-10 w-full table-auto text-center"},_s=s("thead",null,[s("tr",null,[s("td",{class:"border-2 p-2"},"\u6AA2\u8209\u8005\u6703\u54E1ID"),s("td",{class:"border-2 p-2"},"\u8A0A\u606F"),s("td",{class:"border-2 p-2"},"\u5EFA\u7ACB\u65E5\u671F")])],-1),ps={class:"border-2 p-2"},bs={class:"border-2 p-2"},hs={class:"border-2 p-2"},ys={__name:"ProductListAdminView",setup(vs){const m=M(),{getAdminProductHandler:D,deleteProductHandler:H,editProductHandler:I,changeStatusProductHandler:$}=m,{sortMemberProduct:l}=j(),B=z(),{reports:V}=f(B),{toggleShow:g}=f(U());D();const{listProduct:a}=f(m),d=x(l[0]),h=x([]),c=x(),L=E(()=>{if(d.value===l[0])return a.value;if(d.value===l[1])return a.value.filter(e=>e.isSell&&e.status!==2);if(d.value===l[2])return a.value.filter(e=>e.maxNumber-e.sales===0&&e.status!==2);if(d.value===l[3])return a.value.filter(e=>!e.isSell&&e.status!==2);if(d.value===l[4])return a.value.filter(e=>e.status===2)}),v=e=>V.value.filter(o=>o.productId===e),N=e=>{const o=v(e);if(o.length===0)return;g.value=!0,h.value=o;const t=a.value.findIndex(_=>_._id===e);c.value=a.value[t].status},y=e=>{$({id:h.value[0].productId,status:e}),g.value=!1};return(e,o)=>(n(),u("div",q,[i(T,{class:"mb-10"},{default:S(()=>[G]),_:1}),i(F,{modelValue:d.value,"onUpdate:modelValue":o[0]||(o[0]=t=>d.value=t),select:p(l),class:"mb-8"},null,8,["modelValue","select"]),s("div",J,[s("table",K,[O,s("tbody",null,[(n(!0),u(k,null,C(p(L),t=>{var _;return n(),u("tr",{key:t._id},[s("td",Q,r((_=t.userId)==null?void 0:_._id),1),s("td",W,[s("img",{src:t.image,alt:t.name,class:"w-32 h-24 rounded-lg mx-auto object-cover"},null,8,X)]),s("td",Y,r(t.name),1),s("td",ss,r(t.price),1),s("td",ts,r(t.category),1),s("td",{class:b(["border-2 p-2 text-center",{"text-red-400":!t.isSell}])},r(t.isSell?"\u4E0A\u67B6":"\u4E0B\u67B6"),3),s("td",es,r(t.sales),1),s("td",os,r(t.maxNumber-t.sales),1),s("td",rs,[s("p",{class:b({"text-primary cursor-pointer hover:opacity-60":v(t._id).length>0}),onClick:w=>N(t._id)},r(v(t._id).length),11,ls)]),s("td",as,[s("div",ds,[s("img",{src:R,class:"w-6 hover:opacity-60",onClick:w=>p(I)(t._id)},null,8,cs),s("img",{src:A,class:"w-6 hover:opacity-60",onClick:w=>p(H)(t._id)},null,8,ns)])])])}),128))])])]),i(Z,null,{default:S(()=>[i(P,{text:"\u4E0B\u67B6\u5546\u54C1",class:b(["mr-5",{"disabled: opacity-50":c.value===2}]),onClick:o[1]||(o[1]=t=>y(2)),disabled:c.value===2},null,8,["disabled","class"]),i(P,{text:"\u4E0A\u67B6\u5546\u54C1",onClick:o[2]||(o[2]=t=>y(0)),disabled:c.value!==2,class:b({"disabled: opacity-50":c.value!==2})},null,8,["disabled","class"]),s("div",us,[s("table",is,[_s,s("tbody",null,[(n(!0),u(k,null,C(h.value,t=>(n(),u("tr",{key:t._id},[s("td",ps,r(t.userId),1),s("td",bs,r(t.message),1),s("td",hs,r(new Date(t.createDate).toLocaleDateString()),1)]))),128))])])])]),_:1})]))}};export{ys as default};
