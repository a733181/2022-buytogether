import{_ as h,r as p,E as k,f as m,a as l,c as n,p as i,t as c,q as f,d as _,H as N,i as d}from"./index.b886694d.js";const U=["onDragenter","onDragleave","onDrop"],S=["for"],j=["src"],w={key:1,class:"image"},C=["id"],H={__name:"UploadImage",props:{className:{type:String,default:""},modelValue:{type:[String,Object],default:""},title:{type:String,default:""},error:{type:Boolean,default:!1},errorText:{type:String,default:""},id:{type:String}},setup(y,{emit:x}){const a=y,r=p(""),o=p(a.modelValue),s=p(a.errorText||""),D=k(()=>a.className==="avatar"?"avatar-img":"image"),u=e=>{s.value="";const t=e.dataTransfer.files[0];v(t)||(r.value=t,g())},V=e=>{s.value="";const t=e.target.files[0];v(t)||(r.value=t,g())},g=()=>{if(r.value&&r.value.type.startsWith("image/")){let e=new FileReader;e.addEventListener("load",t=>{o.value=t.target.result}),e.readAsDataURL(r.value)}},v=e=>!!e&&!(e.type==="image/jpg"||e.type==="image/jpeg"||e.type==="image/png")?(s.value="\u683C\u5F0F\u932F\u8AA4",!0):!!e&&Math.floor(e.size/1e6)>1?(s.value="\u6A94\u6848\u904E\u5927",!0):!1;return m(r,e=>{x("update:modelValue",e)}),m(a,e=>{e.modelValue!==r.value&&(r.value=e.modelValue)}),(e,t)=>(l(),n("div",{onDragenter:d(u,["prevent"]),onDragleave:d(u,["prevent"]),onDragover:t[0]||(t[0]=d(()=>{},["prevent"])),onDrop:d(u,["prevent"]),onClick:t[1]||(t[1]=B=>s.value=""),class:i({"image-box":a.className!=="avatar"})},[o.value?f("",!0):(l(),n("p",{key:0,class:i({"image-title":a.className!=="avatar"})},c(a.title),3)),_("label",{for:a.id},[o.value?(l(),n("img",{key:0,src:o.value,class:i(N(D))},null,10,j)):(l(),n("div",w))],8,S),_("input",{type:"file",id:a.id,class:"drop-file-input",accept:"image/jpg, image/jpeg, image/png",onChange:V},null,40,C),a.error||s.value?(l(),n("p",{key:1,class:i(["text-red-400",{"text-center":a.className==="avatar"}])},c(a.title)+c(s.value),3)):f("",!0)],42,U))}},T=h(H,[["__scopeId","data-v-e6fdd718"]]);export{T as U};
